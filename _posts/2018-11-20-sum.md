---
layout: post
title: 简单的求和问题
date: 2018-11-20
categories: blog
tags: [ACM,具体数学,学习笔记]
use_math: true	
description: 她再也不会来了
header-img: "https://i.loli.net/2018/12/20/5c1afd8861c6d.jpg"
---



#### 写在前面

*****

> 于尘世相忘，与世界同葬

<br><br><br><br>



#### 题目

***

你需要尽可能快的算出 $f(n) = \sum_{i = 0}^{n} i^2$，$n \geq 0$<br>

可能需要掌握的[前置技能](http://seventeenjcinta.com/blog/2018/11/12/yuesefuhuan/)

<br><br><br>



#### 方法 -1

------

$O(n)$ 做法的可以考虑一下自己该不该自裁了了

<br><br><br><br>



#### 方法 0

****

现在都 8102 年了<br>

求前 $n$ 个数的平方和肯定是已解决了的问题<br>

简单的算出前几项发现是 0， 1， 5， 14 ……<br>

然后 [oeis](http://oeis.org/) 一下<br>

然后问题就[解决](http://oeis.org/search?q=0%2C+1%2C+5%2C+14&language=english&go=Search)辣！<br>

当然机制的同学也可以在 $CRC$ $Stamdard$ $Mathematical$ $Tables$ 的第 36 页找到答案<br>

总之我们有答案：$f(x) = \frac{x(x + 1)(2x+1)}{6}$<br>

然后这题就愉快的做出来辣！<br>

<br><br><br><br>

#### 方法 1

*****

待定系数<br>

我们会发现 $f'(n) = \sum_{i = 0}^{n}i^0 = n$<br>

通向公式是一次的<br>

然后我们又发现 $f''(n) = \sum_{i = 0}^{n}i$ 的通向公式是一次的<br>

那么我们有理由相信 $f(n)$ 的式子是三次的= =！<br>

我们设 $f(n) = an^3 + bn^2+cn+d$<br>

然后手算前 4 项带进去就好了<br>

<br><br><br><br>

#### 方法 2

******

也许 方法 0 的解法让人觉得不是正道<br>

我们应该尝试能用自己的推导得出答案<br>

例如聪明的 $Heaven\_$ 会尝试猜一个式子 $f'(x) = \frac{n(n + 0.5)(n + 1)}{3}$<br>

带进去会发现前几项是对的<br>

于是我们有理由相信这个是对的<br>

但是这样一来就和 方法 0 一样令人感到不适了<br>

所以我们要尝试证明一下<br>

当然是归纳法啦<br>

- 当然我们能发现 $f(0) = \frac{0 × 0.5 × 1}{3} = 0^2$ 成立 

- 假设 $n > 0$ 且 $f(n - 1)$ 满足上面的那个式子 $f'(n - 1)$<br>

    然后我们有<br>
    $$\begin{align*}
     3f(n) &= 3f(n - 1) + 3n^2 \\
     &= (n - 1)(n - 0.5)n + 3n^2\\
     &= (n^3 - \frac{3}{2}n^2+\frac{1}{2}n) + 3n^3\\
     &= (n^3 + \frac{3}{2}n^2+\frac{1}{2}n)\\
     &= n(n + 0,5)(n + 1)\\
    \end{align*}$$<br>
    然后移项一下就好了<br>

    证毕<br>

归纳法天下第一<br>

<br><br><br><br>



#### 方法 3

****

现在我们尝试直接算出来<br>

这个东西其实大家都已经很熟悉了<br>

他有自己的名字，叫扰动法<br>

让我们充满信心的来一发（？）<br>
$$
\begin{align*}
 f(n) + (n + 1)^2 &= \sum_{i = 0}^{n} (i + 1)^2\\
 &= \sum_{i = 0}^{n} (i^2 + 2i + 1)\\
 &= \sum_{i = 0}^{n} i^2 + 2\sum_{i = 0}^{n}i + \sum_{i = 0}^{n}1\\
 &= f(n) + 2\sum_{i = 0}^{n}i + n + 1\\
\end{align*}
$$
<br>

然后我们会很悲伤的发现 $f(n)$ 被约掉了<br>

然后我们发现出现了前 $n$ 个数的一次方的和<br>

那我们对 $g(n) = \sum_{i = 0}^{n} i^3$，$n \geq 0$ 扰动一下，前 $n$ 个数的平方的和没准就出来了！<br>
$$
\begin{align*} 
g(n) + (n + 1)^3 &= \sum_{i = 0}^{n} (i + 1)^3\\ 
&= \sum_{i = 0}^{n} (i^3 + 3i^2 + 3i + 1)\\ 
&= g(n) + 3f(n) + 3\frac{n(n + 1)}{2} + n + 1\\ 
\end{align*}
$$


<br>

在我们的意料之内<br>

$g(n)$ 被消除了然后给我们留下了 $f(n)$<br>

经过简单的移项后，$f(n)$ 的式子就出来了<br>

<br><br><br><br>

#### 方法 4

*****

我们其实还可以用微积分的方法解决这个问题<br>

大家都知道一个函数的积分<br>

可以看作在坐标轴中图像和坐标轴围城的图形的面积<br>

我们可以用若干个狭长的小矩形或者是小梯形的面积相加来近似这个面积<br>

当然我们也可以反过来<br>

对与 $f(n)$ <br>

可以当作平面中若干个宽为 $1$，长为 $i^2$ 的矩形的面积和<br>

近似等于 $0$ 到 $n$ 之间区间 $f'(x) = x^2$ 下面的面积<br>

也就是所谓的 $\int_{0}^{n}x^2dx = n^3 / 3$<br>

所以我们可以知道 $f(n)$ 近似等于 $n^3 / 3$<br>

然后我们需要把误差补上<br>

即 $E(n) = f(n) - \frac{n^3}{3}$<br>

然后 $f(n)$ 满足 $f(n) = f(n - 1) + n^2$<br>

我们就会发现 $E(n) $其实满足更简单的递归式！<br>
$$
\begin{align*} 
E(n) &= f(n) - \frac{n^3}{3}\\ 
&= f(n - 1) + n^2 - \frac{n^3}{3}\\ 
&= E(n - 1) + \frac{1}{3}(n - 1)^3 + n^2 - \frac{n^3}{3}\\
&= E(n - 1) + n - \frac{1}{3}\\
\end{align*}
$$


<br>另外一种方法是通过对楔形误差项的面积求和来得到 $E(n)$<br>
$$
\begin{align*} 
f(n) - \int_0^nx^2dx&= \sum_{i = 1}^{n}(i^2 - \int_{i - 1}^{i}x^2dx)\\ 
&= \sum_{i = 1}^{n}(i^2 - \frac{i^3 - (i - 1)^3}{3})\\ 
&= \sum_{i = 1}^{n}(i - \frac{1}{3})\\
\end{align*}
$$
<br>

两种方法都可以很好的求出 $E(n)$<br>

<br><br><br><br>

#### 方法 5

*****

我们其实可以采用一个更复杂的式子来替换原先的式子<br>

只要那个更复杂的式子拿捏得当（过分了！！！！！！！！！）<br>

我们就可以化简了！<br>
$$
\begin{align*} 
f(n) &= \sum_{i = 1}^n i^2\\ 
&= \sum_{i = 1}^{n}\sum_{j = i}^{n}j\\ 
&= \sum_{i = 1}^{n}(\frac{i + n}{2})(n - i + 1)\\
&= \frac{1}{2}\sum_{i = 1}^{n}(n(n + 1) + i - i^2)\\
&= \frac{1}{2}n^2(n + 1) + \frac{1}{4}n(n + 1) - \frac{1}{2}f(n)\\
&= \frac{1}{2}n(n + \frac{1}{2})(n + 1) - \frac{1}{2}f(n)\\
\end{align*}
$$



<br><br><br><br>

#### 方法 5

*****

可以直接用下降阶乘幂来搞<br>
$$
\begin{align*} 
f(n) &= \frac{n^{\underline3}}{3} + \frac{n^{\underline2}}{2}\\ 
&= \frac{1}{3}n(n - 1)(n - 2 + \frac{3}{2})\\ 
&= \frac{1}{3}n(n - 0.5)(n - 1)\\
\end{align*}
$$
<br>

其中 $n^{\underline{m}} = n(n - 1)(n - 2)…(n - m + 1)$<br>

关于下降阶乘幂下篇博客介绍<br>

<br><br><br><br>

#### 方法 6

******

直接生成函数<br>

下下篇博客介绍<br>
